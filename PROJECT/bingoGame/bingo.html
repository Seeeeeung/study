<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bingo!</title>
<style>
	.font13 {font-size:13px}
	.text-center {text-align:center !important;}
	.hidden {display:none !important;}
	html,body {font-size:16px;}
	html,body,div,h1,table,input,ul {padding:0; margin:0;}
	ul {list-style-type:none}
	td {padding:0;}
	#app {height: 700px; display:flex; justify-content:center; align-items:center; padding: 1rem;}
	.wrap {min-width:300px; height:600px;}
	.container {display:flex; flex-direction:column; justify-content:space-between; align-items:center;}
	.tit {font-size:1.5rem; color:#ccc; text-align:center;}
	
	.topic-wrap {margin-top:2rem; font-size:1rem; text-align:center; color:#000}
	.select-title {font-size:1rem; font-weight:700; color:#888;}
	.select-list li {display:inline;}
	.select-list button {padding:6px; margin-top:10px; color:hotpink; background-color:pink; border:none; border-radius:10px; outline:none; cursor:pointer;}
	.select-list button:active {color:#fff; background-color:rgb(250, 139, 194)}
	.select-list button.active {color:#fff; font-weight:700; background-color:hotpink}
	.topic {word-break:break-all; line-height:1.5rem;}
	.info-txt {color:#888; font-size:.7rem}
	.info-txt:before {display:inline-block; padding-right:5px; font-size:.7rem; vertical-align:center; content:'※';}
	
	.contents {margin-top: 2rem;}
	.bingo-score.hidden {display:none;}
	.bingo-score {text-align:right; margin-bottom:10px;}
	.bingo-score .btn-wrap {display:inline; width:60px; }
	.btn-wrap .btn-bingo {width:60px; height:30px; font-size:1rem; font-weight:700; color:yellow; border-radius:50px; background-color:yellowgreen; box-shadow:1px 1px 3px #ddd, -2px -1px #ddd}
	.btn-wrap .btn-bingo:active {color:yellowgreen; background-color:yellow;}

	table {position:relative; border-spacing:0; border-collapse:collapse; line-height:1.4rem; table-layout:fixed;}
	.table-wrap {border:1px solid #ccc; padding:1rem;}
	caption {position:absolute; left:-9999px; font-size:0; line-height:0;}
	caption, td {text-align:center; border:1px solid #ccc;}

	.input-wrap.done:hover {background-color:rgb(255, 157, 157); cursor:pointer;}
	.input-wrap.done.active {background-color:red;}

	.ui-input {min-width:50px; width:70px; height:60px; text-align:center; border:0; outline:none; box-sizing:border-box}
	.ui-input:focus {background-color: pink}
	.ui-input.type-long {width:150px; height:30px;}
	.ui-input.type-long:focus {background-color:transparent; border-bottom:1px solid pink}
	
	.btn-wrap {display:block; margin:10px; text-align:right;}
	.btn-wrap button {background-color:#ccc; padding:5px; outline:none; border:none; font-size:0.8rem; cursor:pointer;}
	.topic-wrap .btn-wrap button {font-size:0.7rem; background-color:transparent; color:#888; border-radius:10px;}
	.btn-more:after {display:inline-block; padding-left:5px; vertical-align:baseline; content:'▼'}
	.btn-less:after {display:inline-block; padding-left:5px; vertical-align:baseline; content:'▲'}


</style>
</head>
<body>
	<div id="app">
		<div class="wrap">
			<!-- container -->
			<div class="container">
				<h1 class="tit">Bingo GAME(5X5)</h1>
				<div class="topic-wrap">
					<p class="select-title">주제를 선택해주세요<br /><span class="font13">(보여지는 내용은 예시입니다. 선택지 외 다른 단어를 입력하여도 좋습니다.)</span></p>
					<ul class="select-list">
						<li><button type="button">과일</button></li>
						<li><button type="button">라면 이름</button></li>
						<li><button type="button">양식 요리 이름</button></li>
						<li><button type="button">한식 요리 이름</button></li>
						<li><button type="button">중식 요리 이름</button></li>
						<li><button type="button">일식 요리 이름</button></li>
						<li><button type="button">인기배우(남자)</button></li>
						<li><button type="button">인기배우(여자)</button></li>
						<li><button type="button">인기가수(남자)</button></li>
						<li><button type="button">인기가수(여자)</button></li>
						<li><button type="button">브랜드카페</button></li>
						<li><button type="button">브랜드식당</button></li>
						<li><button type="button">지하철(1호선)</button></li>
						<li><button type="button">지하철(2호선)</button></li>
						<li><button type="button">지하철(4호선)</button></li>
						<li><button type="button">여행지 나라(지역) 이름</button></li>
					</ul>

					<div class="btn-wrap text-center">
						<button type="button" class="btn-more" onclick="showMore()">목록 더보기</button>
						<button type="button" class="btn-less hidden" onclick="showLess()">목록 접기</button>
					</div>

					<p class="topic"></p>
					<p class="info-txt">주제 선택지 추가를 원하시면 7718jkcool&#64;gmail.com 로 문의해주세요.</p>
				</div>

				<!-- contents -->
				<div class="contents">
					<div class="bingo-score hidden">
						<span class="score">score : <strong>0</strong></span>

						<div class="btn-wrap">
							<button type="button" class="btn-bingo">빙고!</button>
						</div>
					</div>

					<!-- table-wrap -->
					<div class="table-wrap">
						<table>
							<caption>글자를 적을수 있는 테이블입니다.</caption>
							<tbody>
								<tr>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
								</tr>
								<tr>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
								</tr>
								<tr>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
								</tr>
								<tr>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
								</tr>
								<tr>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
									<td>
										<div class="input-wrap">
											<input type="text" title="텍스트입력" placeholder="입력" class="ui-input" />
										</div>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
					<!-- //table-wrap -->

					<div class="btn-wrap">
						<button type="button" class="btn-done">게임시작</button>
						<button type="button" class="btn-reset">새 게임하기</button>
					</div>
				</div>
				<!-- //contents -->
			</div>
			<!-- //container -->
		</div>
	</div>

	<script src="./topics.js"></script>
	<script>
		var list = document.querySelectorAll('.select-list li'),
			topic = document.querySelector('.topic');

		for (let i=0; i<list.length; i++) {
			list[i].classList.add('hidden');
		}

		function showMore() {
			const listData = Array.prototype.slice.call(document.querySelectorAll('.select-list li.hidden')).slice(0, 4);
			for (let i=0; i<listData.length; i++) {
				listData[i].classList.remove('hidden')
			}
			switchBtn()
		}
		function showLess() {
			const listData = Array.prototype.slice.call(document.querySelectorAll('.select-list li:not(.hidden)')).slice(4, 16);
			for (let i=0; i<listData.length; i++) {
				listData[i].classList.add('hidden')
			}
			if (document.querySelector('.select-list li button.active')) {
				document.querySelector('.select-list li button.active').classList.remove('active');
				hiddenTopics()
			}
			switchBtn()
		}
		function switchBtn() {
			var hiddenEle = Array.prototype.slice.call(document.querySelectorAll('.select-list li.hidden')),
				moreBtn = document.querySelector('.btn-more'),
				lessBtn = document.querySelector('.btn-less');

			if (hiddenEle.length == 0) {
				moreBtn.classList.add('hidden');
				lessBtn.classList.remove('hidden');
			} else {
				moreBtn.classList.remove('hidden');
				lessBtn.classList.add('hidden');
			}
		}

		window.onload = function() {showMore()}

		function hiddenTopics() {
			if (!document.querySelector('.select-list li button.active')) topic.innerText = '';
		}

		function checkTopic() {
			if (this.closest('.select-list').querySelector('.active')) {
				var topicValue = document.querySelector('.select-list').querySelector('.active').innerText;
				console.log(topics['여행지 나라(지역) 이름'].length)

				if (topics[topicValue]) {
					topic.innerText = topics[topicValue];
					topic.style.color = '#000';
				}
			}
		}

		const topicBtn = document.querySelectorAll('.select-list button');
		for (let i=0; i<topicBtn.length; i++) {
			topicBtn[i].addEventListener('click', function() {
				if (this.closest('.select-list').querySelector('.active')) {
					if (this == this.closest('.select-list').querySelector('.active')) {
						this.classList.remove('active');
						hiddenTopics()
						return false
					}
					this.closest('.select-list').querySelector('.active').classList.remove('active')
				} 
				this.classList.add('active')
			})
			topicBtn[i].addEventListener('click', checkTopic)
		}
		

		var inps = document.querySelectorAll('.input-wrap input:not(.type-long)');
		function checkValue() {
			for (let i=0; i<inps.length; i++) {
				const inp = inps[i];
				const inpParent = inp.parentElement;
				const currentValue = inp.value;
				if (currentValue != '' && currentValue != null) {
					inpParent.style.border = 'none'
					setDone()
				} else {
					inpParent.style.borderWidth = '1px'
					inpParent.style.borderStyle = 'solid'
					inpParent.style.borderColor = 'red'
				}

				function setDone() {
					inpParent.classList.add('done')
					inp.setAttribute('disabled','true')
					inp.setAttribute('title','빙고!')
				}
			}
		}

		function checkDone() {
			var inpDone = document.querySelectorAll('.input-wrap.done');
			if (inpDone.length < inps.length) {
				console.log('입력되지않은 공간이 있습니다.')
			} else if (inpDone.length == inps.length) {
				console.log('시작완료')
				startBingo()
			}

			function startBingo() {
				const score = document.querySelector('.bingo-score.hidden');
				score.classList.remove('hidden')
				for (let i=0; i<inpDone.length; i++) {
					const bingo = inpDone[i];
					bingo.addEventListener('click', function() {
						this.classList.toggle('active')
					});
				}
			}
		}

		function resetValue() {
			location.reload(true)
		}

		const done = document.querySelector('.btn-done');
		done.addEventListener('click', checkValue);
		done.addEventListener('click', checkDone);

		const reset = document.querySelector('.btn-reset');
		reset.addEventListener('click', resetValue)

		var count = 0;
		const scoreBtn = document.querySelector('.btn-bingo');
		function upScore() {
			count = count+1;
			document.querySelector('.score strong').innerText = count;
		}

		scoreBtn.addEventListener('click', upScore);
	</script>
</body>
</html>